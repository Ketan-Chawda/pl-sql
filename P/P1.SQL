DECLARE
	AC ACCOUNT.ACNO%TYPE;
	SBAL ACCOUNT.BAL%TYPE;
	STYPE VARCHAR2(1);
BEGIN
	AC:='&AC';
	SBAL:='&SBAL';
	STYPE:='&STYPE';

	UPDATE   	ACCOUNT
	SET BAL=BAL+SBAL
	WHERE STYPE='C' AND AC=ACNO;

	SAVEPOINT KETAN;

	UPDATE
	ACCOUNT
	SET BAL=BAL-SBAL
	WHERE STYPE='D' AND AC=ACNO;
	
	SELECT BAL INTO SBAL
	FROM ACCOUNT
	WHERE ACNO=AC;
	
	IF SBAL<500 THEN
	DBMS_OUTPUT.PUT_LINE('SORRY CANNOT DEBIT DUE TO INSUFFICIENT BALANCE');
	ROLLBACK TO SAVEPOINT KETAN;
	END IF;
EXCEPTION
	WHEN NO_DATA_FOUND THEN
	DBMS_OUTPUT.PUT_LINE('SORRY NO DATA ARE AVAILABLE FOR THIS ENTRY');
END;
