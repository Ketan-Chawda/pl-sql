CREATE OR REPLACE FUNCTION NOTRETURN 
	RETURN NUMBER IS
	
	CURSOR NOTRETURN_CURSOR IS
	SELECT I_ID,BID,SID,IDATE
	FROM ISSUE1
	WHERE IDATE>SYSDATE-15
	AND I_ID NOT IN(SELECT I_ID FROM RETURN1);

	F_ID ISSUE1.I_ID%TYPE;
	F_BID ISSUE1.BID%TYPE;
	F_SID ISSUE1.SID%TYPE;
	F_IDATE ISSUE1.IDATE%TYPE;
	TOTAL NUMBER(2);
BEGIN
	TOTAL:=0;
	OPEN NOTRETURN_CURSOR;
	LOOP
	FETCH NOTRETURN_CURSOR INTO F_ID,F_BID,F_SID,F_IDATE;
	EXIT WHEN NOTRETURN_CURSOR%NOTFOUND;	
	DBMS_OUTPUT.PUT_LINE('*********************************************************');
	DBMS_OUTPUT.PUT_LINE('BOOK ID:'||F_BID);
	DBMS_OUTPUT.PUT_LINE('STUDENT ID:'||F_SID);
	DBMS_OUTPUT.PUT_LINE('ISSUE ID:'||F_ID);
	DBMS_OUTPUT.PUT_LINE('ISSUE DATE IS='||F_IDATE);
	TOTAL:=12;	
	END LOOP;	
	IF(TOTAL<>12) THEN
	DBMS_OUTPUT.PUT_LINE('SORRY NO RECORD FOUND');
	END IF;
	RETURN 1;
	
EXCEPTION
	WHEN OTHERS THEN
	DBMS_OUTPUT.PUT_LINE('AN EXCEPTION IS RAISED IN FUNCTION-NOTRETURN');
END NOTRETURN;

