CREATE OR REPLACE FUNCTION FINETOPAY(ID IN STUDENT1.SID%TYPE)
	RETURN NUMBER IS

	AMOUNT NUMBER(5,2);
	DAYS NUMBER(3);
	
BEGIN
	SELECT (RDATE-IDATE-15) INTO DAYS
	FROM ISSUE1,RETURN1
	WHERE RDATE-IDATE >15
	AND ISSUE1.I_ID=RETURN1.I_ID
	AND ISSUE1.SID=ID;
	
	IF(DAYS<7) THEN
	RETURN DAYS*1;
	ELSIF(DAYS<15) THEN
	RETURN DAYS*3;
	ELSIF(DAYS>=15) THEN
	RETURN DAYS*5;
	END IF;
					
EXCEPTION
	WHEN NO_DATA_FOUND THEN
	DBMS_OUTPUT.PUT_LINE('SORRY NO RECORD IS FOUND OR NO FINED IS CHARGED');
	RETURN -1;
	WHEN OTHERS THEN
	DBMS_OUTPUT.PUT_LINE('A EXCEPTION IS RAISED IN FINE FUNCTION');
END FINETOPAY;

