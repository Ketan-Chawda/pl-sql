DECLARE
	CURSOR P10_CURSOR
	IS SELECT INAME,ONO,QTY,RATE
	FROM TRANSACTION,ITEMMASTER
	WHERE TRANSACTION.ICODE=ITEMMASTER.ICODE;
	
	F_INAME ITEMMASTER.INAME%TYPE;
	F_ONO TRANSACTION.ONO%TYPE;
	F_QTY TRANSACTION.QTY%TYPE;
	F_RATE ITEMMASTER.RATE%TYPE;
	
	V_DISCOUNT DETAILS.DISCOUNT%TYPE;
	V_AMOUNT DETAILS.AMOUNT%TYPE;
BEGIN
	OPEN P10_CURSOR;
	LOOP
	FETCH P10_CURSOR INTO F_INAME,F_ONO,F_QTY,F_RATE;

	EXIT WHEN P10_CURSOR%NOTFOUND;
	IF(F_INAME='T-SHIRT') THEN
	V_DISCOUNT:=F_RATE*0.15*F_QTY;
	ELSIF(F_INAME='DRESS') THEN
	V_DISCOUNT:=F_RATE*0.05*F_QTY;
	ELSIF(F_INAME='SHERWANI') THEN
	V_DISCOUNT:=F_RATE*0.35*F_QTY;
	ELSE
	V_DISCOUNT:=0;
	END IF;

	V_AMOUNT:=F_RATE*F_QTY-V_DISCOUNT;
	
	INSERT INTO DETAILS
	VALUES(F_ONO,V_DISCOUNT,V_AMOUNT);

	END LOOP;
END;
	
	
	
	
	
	