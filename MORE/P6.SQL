DECLARE
	CURSOR P6_CURSOR
	IS SELECT CNO,CNAME,PNO,PNAME,QTYONHAND FROM 
	CLIENT_MST,PRODUCT_MST;

	F_CNO CLIENT_MST.CNO%TYPE;
	F_CNAME CLIENT_MST.CNAME%TYPE;
	F_PNO PRODUCT_MST.PNO%TYPE;
	F_PNAME PRODUCT_MST.PNAME%TYPE;
	F_QTYONHAND PRODUCT_MST.PNAME%TYPE;
	
	U_CNO CLIENT_MST.CNO%TYPE;
	U_PNO PRODUCT_MST.PNO%TYPE;
	U_QTY PRODUCT_MST.QTYONHAND%TYPE;
		
BEGIN
	U_CNO:='&U_CNO';
	U_PNO:='&U_PNO';
	U_QTY:='&U_QTY';

	OPEN P6_CURSOR;
	LOOP
	FETCH P6_CURSOR INTO F_CNO,F_CNAME,F_PNO,F_PNAME,F_QTYONHAND;
	EXIT WHEN P6_CURSOR%NOTFOUND;
	IF(F_CNO=U_CNO AND F_PNO=U_PNO AND U_QTY<=F_QTYONHAND) THEN

	INSERT INTO SALES_ORDER
	VALUES(U_CNO,U_PNO,U_QTY,F_CNAME,F_PNAME);
	
	UPDATE PRODUCT_MST
	SET QTYONHAND=QTYONHAND-U_QTY
	WHERE PNO=F_PNO;
	DBMS_OUTPUT.PUT_LINE('YES THE ENTRY IS MADE IN SALES ORDER TABLE');		
	END IF;
	END LOOP;
END;
	

